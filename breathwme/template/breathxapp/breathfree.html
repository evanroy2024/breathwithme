<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WebToNative Haptic Test</title>
</head>
<body>
  <button id="haptic" style="padding:20px; font-size:20px;">WTN HAPTIC</button>
  <div id="log"></div>

  <script src="https://app.webtonative.com/sdk.js"></script>
  
  <script>
    let log = document.getElementById('log');
    
    function addLog(msg) {
      log.innerHTML += '<br>' + new Date().toLocaleTimeString() + ': ' + msg;
    }
    
    // Check if WTN loaded
    function checkWTN() {
      if (window.WTN) {
        addLog('✅ WTN SDK loaded');
        if (window.WTN.haptics) {
          addLog('✅ WTN haptics available');
        } else {
          addLog('❌ WTN haptics not available');
        }
      } else {
        addLog('❌ WTN SDK not loaded');
      }
    }
    
    document.getElementById('haptic').onclick = function() {
      addLog('Testing WTN haptic...');
      
      if (!window.WTN) {
        addLog('❌ WTN not loaded - check internet connection');
        return;
      }
      
      if (!window.WTN.haptics) {
        addLog('❌ WTN haptics not available - check app configuration');
        return;
      }
      
      // Try all WTN haptic effects
      let effects = [
        'impactLight',
        'impactMedium', 
        'impactHeavy',
        'notificationSuccess',
        'notificationWarning',
        'notificationError',
        'selectionChanged'
      ];
      
      effects.forEach((effect, i) => {
        setTimeout(() => {
          try {
            window.WTN.haptics.trigger({ effect: effect });
            addLog('✅ Triggered: ' + effect);
          } catch (error) {
            addLog('❌ Failed ' + effect + ': ' + error.message);
          }
        }, i * 500);
      });
      
      // Also try with duration
      setTimeout(() => {
        try {
          window.WTN.haptics.trigger({ 
            effect: 'impactHeavy',
            duration: 1000 
          });
          addLog('✅ Triggered heavy with duration');
        } catch (error) {
          addLog('❌ Duration failed: ' + error.message);
        }
      }, effects.length * 500);
    };
    
    // Wait for SDK to load
    setTimeout(() => {
      checkWTN();
      
      // Auto-test
      setTimeout(() => {
        if (window.WTN && window.WTN.haptics) {
          addLog('Auto-testing medium impact...');
          try {
            window.WTN.haptics.trigger({ effect: 'impactMedium' });
            addLog('✅ Auto-test sent');
          } catch (error) {
            addLog('❌ Auto-test failed: ' + error.message);
          }
        }
      }, 2000);
    }, 1000);
    
    // Debug info
    window.addEventListener('load', () => {
      setTimeout(() => {
        addLog('--- DEBUG INFO ---');
        addLog('User Agent: ' + navigator.userAgent.substring(0, 50) + '...');
        addLog('Platform: ' + navigator.platform);
        addLog('WTN Object: ' + (window.WTN ? 'Present' : 'Missing'));
        if (window.WTN) {
          addLog('WTN Keys: ' + Object.keys(window.WTN).join(', '));
        }
      }, 3000);
    });
  </script>
</body>
</html>